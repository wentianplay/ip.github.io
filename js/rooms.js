var roomlist,mycroom;function ChooseRoom(id){	mycroom=id;	var trs=document.getElementById("div_rooms").getElementsByTagName("tbody")[0].getElementsByTagName("tr");	for(var i=0;i<trs.length;i++)	{		trs[i].className="";	}	trs[id].className="CRoom";}function EnterRoom(){	alert(roomlist[mycroom].id);}
function DrawRooms()
{	var div=document.createElement("div");	div.id="div_rooms";	div.className="rooms";	var trooms="";	var t;	for(var i=0;i<roomlist.length;i++)	{		trooms+='<tr ondblclick="EnterRoom()" onclick="ChooseRoom('+i+')"><td>'+roomlist[i].id+"</td><td>"+roomlist[i].fzname+"</td><td>"+roomlist[i].renshu+"/8</td><td>"+roomlist[i].xuanjiang+"</td><td>";		t=roomlist[i].jiangbao;		if(t%2)		{			roomlist[i].feng=true;			trooms+="风";		}		t>>=1;		if(t%2)		{			roomlist[i].fengshen=true;			trooms+="<span class=\"red\">风</span>";		}		t>>=1;		if(t%2)		{			roomlist[i].huo=true;			trooms+=" 火";		}		t>>=1;		if(t%2)		{			roomlist[i].huoshen=true;			trooms+="<span class=\"red\">火</span>";		}		t>>=1;		if(t%2)		{			roomlist[i].shan=true;			trooms+=" 山";		}		t>>=1;		if(t%2)		{			roomlist[i].shanshen=true;			trooms+="<span class=\"red\">山</span>";		}		t>>=1;		if(t%2)		{			roomlist[i].lin=true;			trooms+=" 林";		}		t>>=1;		if(t%2)		{			roomlist[i].linshen=true;			trooms+="<span class=\"red\">林</span>";		}		t>>=1;		if(t%2)		{			roomlist[i].yijiang=true;			trooms+=" 一将";		}		t>>=1;		if(t%2)		{			roomlist[i].yijiang2012=true;			trooms+=" 一将2012";		}		t>>=1;		if(t%2)		{			roomlist[i].sp=true;			trooms+=" sp";		}		t>>=1;		if(t%2)		{			roomlist[i].spxing=true;			trooms+=" ☆sp";		}		t>>=1;		if(t%2)		{			roomlist[i].tongque=true;			trooms+=" 铜雀";		}		trooms+="</td><td>";		if(roomlist[i].status==1)			trooms+="游戏中";		else			trooms+="等待中";		trooms+="</td></tr>";	}	div.innerHTML='<table class="rooms"><thead><tr><th>房间号</th><th>房主</th><th>人数</th><th>选将数</th><th>武将包</th><th>状态</th></tr></thead><tbody>'+trooms+'</tbody></table><p class="ManageRoom"><span onclick="NewRoom()">新建房间</span> <span onclick="EnterRoom()">进入房间</span></p>';	document.getElementsByTagName("body")[0].appendChild(div);
}function NewRoom(){	var tc=document.createElement("div");	tc.id="div_tcck";	tc.className="tcck";	tc.innerHTML='<div class="opacity"></div><div class="newroom"><div class="tctitle"><div>新建房间</div><span onclick="CloseTCCK()">X</span></div><ul><li>选将数：<input type="text" value="5" id="text_newroom_xuanjiang" /></li><li>密码：<input type="text" value="" id="text_newroom_password" /></li><li>风包：<input type="checkbox" checked="checked" id="checkbox_newroom_feng" />开启 <input type="checkbox" checked="checked" id="checkbox_newroom_fengshen" />神将</li>	<li>火包：<input type="checkbox" checked="checked" id="checkbox_newroom_huo" />开启 <input type="checkbox" checked="checked" id="checkbox_newroom_huoshen" />神将</li>	<li>山包：<input type="checkbox" checked="checked" id="checkbox_newroom_shan" />开启 <input type="checkbox" checked="checked" id="checkbox_newroom_shanshen" />神将</li>	<li>林包：<input type="checkbox" checked="checked" id="checkbox_newroom_lin" />开启 <input type="checkbox" id="checkbox_newroom_linshen" />神将</li>	<li><input type="checkbox" checked="checked" id="checkbox_newroom_yijiang" />一将 <input type="checkbox" checked="checked" id="checkbox_newroom_yijiang2012" />一将2012 <input type="checkbox" checked="checked" id="checkbox_newroom_sp" />sp <input type="checkbox" checked="checked" id="checkbox_newroom_spxing" />☆sp <input type="checkbox" checked="checked" id="checkbox_newroom_tongque" />铜雀 </li>	<li>安全验证(无则不填)：<input type="password" id="password_newroom_anquan" /></li><li><input type="button" onclick="CreateRoom()" value="确定" /> <input type="button" onclick="CloseTCCK()" value="取消" /></li></ul></div>';	document.getElementsByTagName("body")[0].appendChild(tc);	}function CreateRoom(){	var s,jiang=0;	if(!(document.getElementById("text_newroom_xuanjiang").value>0))	{		alert("选将数不能为空");		return;	}	s="xuanjiang="+document.getElementById("text_newroom_xuanjiang").value;	if(document.getElementById("text_newroom_password").value!="")	{		s+="&password="+SHA1(document.getElementById("text_newroom_password").value);	}	if(document.getElementById("checkbox_newroom_feng").checked)		jiang+=1;	if(document.getElementById("checkbox_newroom_fengshen").checked)		jiang+=2;	if(document.getElementById("checkbox_newroom_huo").checked)		jiang+=4;	if(document.getElementById("checkbox_newroom_huoshen").checked)		jiang+=8;	if(document.getElementById("checkbox_newroom_shan").checked)		jiang+=16;	if(document.getElementById("checkbox_newroom_shanshen").checked)		jiang+=32;	if(document.getElementById("checkbox_newroom_lin").checked)		jiang+=64;	if(document.getElementById("checkbox_newroom_linshen").checked)		jiang+=128;	if(document.getElementById("checkbox_newroom_yijiang").checked)		jiang+=256;	if(document.getElementById("checkbox_newroom_yijiang2012").checked)		jiang+=512;	if(document.getElementById("checkbox_newroom_sp").checked)		jiang+=1024;	if(document.getElementById("checkbox_newroom_spxing").checked)		jiang+=2048;	if(document.getElementById("checkbox_newroom_tongque").checked)		jiang+=4096;	s+="&jiangbao="+jiang;	if(document.getElementById("password_newroom_anquan").value!="")		s+="&anquan="+SHA1(document.getElementById("password_newroom_anquan").value);		Send("createroom",s);	CloseTCCK();}function CloseTCCK(){	var tc=document.getElementById("div_tcck");	tc.parentNode.removeChild(tc);}function CRFail(id,m){	destroy(id);	alert("建立新房间失败："+m);}function CRSuccess(){	var rms=document.getElementById("div_rooms");	rms.parentNode.removeChild(rms);	DrawWaitingRoom();}